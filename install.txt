/*** Connect to wifi if necessary ***/
wifi-menu

/*** Create partitions ***/
fdisk -l
fdisk /dev/sda
// 4 partitions: boot (200M), swap (150% RAM), root (30G), home
mkfs.ext4 /dev/sda1
mkfs.ext4 /dev/sda3
mkfs.ext4 /dev/sda4
mkswap /dev/sda2
swapon /dev/sda2
mount /dev/sda3 /mnt
mkdir /mnt/boot
mount /dev/sda1 /mnt/boot
mkdir /mnt/home
mount /dev/sda4 /mnt/home

/*** Install base packages ***/
pacstrap /mnt base base-devel linux linux-firmware nano

/*** Setup system ***/
genfstab -U /mnt >> /mnt/etc/fstab
arch-chroot /mnt

pacman-key --init
pacman-key --populate archlinux

/*** Setup network manager ***/
pacman -S networkmanager
systemctl enable NetworkManager

/*** Setup grub ***/
pacman -S grub
grub-install /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg

/*** Set locale ***/
nano /etc/locale.gen
// uncomment en_US lines (and other languages you want)
locale-gen
echo LANG=en_US.UTF-8 > /etc/locale.conf
ln -sf /usr/share/zoneinfo/Europe/Lisbon /etc/localtime

/*** Setup host ***/
echo dedeco99-PC > /etc/hostname
passwd

/*** Reboot ***/
exit
umount -R /mnt
reboot

/*** Setup wifi if necessary ***/
nmtui

/*** Setup user ***/
useradd -m -g wheel dedeco99
passwd dedeco99
sudo nano /etc/sudoers
// uncomment %wheel ALL=(All) ALL

sudo nano /etc/pacman.conf
// uncomment [multilib]

/*** Setup graphical interface ***/
sudo pacman -S xorg-server xorg-xinit pkgfile xorg-xrandr nvidia lib32-nvidia-libgl

sudo mkinitcpio -P

/*** Setup window manager ***/
sudo pacman -S bspwm sxhkd

/*** Setup display manager ***/
// sudo pacman -S lightdm lightdm-gtk-greeter
// sudo systemctl enable lightdm

/*** Setup terminal ***/
sudo pacman -S git zsh kitty

/*** Change default shell ***/
chsh -s /usr/bin/zsh

/*** Setup my configs ***/
git clone https://github.com/dedeco99/dotfiles
sh link.sh {i3, bspwm}

/*** Install yay ***/
git clone https://aur.archlinux.org/yay.git
cd yay
makepkg -si

sudo nvidia-xconfig
sudo pkgfile -u

/*** Install my packages ***/
install ncdu p7zip udisks2 udiskie i3lock termdown picard reflector pacgraph via-bin flutter neofetch
install nodejs-lts-hydrogen npm pulseaudio pavucontrol mpd
install libnotify dunst rofi flameshot vlc ncmpcpp
install pcmanfm code discord deluge-gtk steam peek nsxiv polybar
install beets ntfs-3g polkit-gnome

/*** Install AUR packages ***/
install brave-bin freefilesync-bin mongodb-tools-bin robo3t-bin etcher-bin
install python-ffsubsync subliminal yt-dlp instaloader

/*** Setup Theme ***/
install adapta-gtk-theme papirus-icon-theme xcursor-breeze
install qt5ct kvantum-qt5 kvantum-theme-adapta

/*** Setup system applets ***/
install network-manager-applet

/*** Setup fonts ***/
install ttf-sourcecodepro-nerd ttf-iosevka-nerd noto-fonts noto-fonts-emoji

/*** Setup git ***/
git config --global credential.helper store
git pull

/*** Setup ip (for wifi bullshitery) ***/
nmcli con mod "MEO-B5DE4F-5G" ipv4.addresses "192.168.1.69" ipv4.gateway "192.168.1.254"  ipv4.method "manual"